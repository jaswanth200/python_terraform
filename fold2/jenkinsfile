pipeline {
    agent any
   
    stages {
        stage('Terraform Init - Folder 2') {
            steps {
                dir('fold2') {
                    script {
                        sh 'terraform init'
                    }
                }
            }
        }

        stage('Terraform Apply - Folder 2') {
            steps {
                dir('fold2') {
                    script {
                        
                        sh """
                            terraform apply -auto-approve \
                                -var="ami=${AMI_ID}" \
                                | tee /tmp/terraform_output_fold2.txt
                        """
                        
                    }
                }
            }
        }
    }
}

